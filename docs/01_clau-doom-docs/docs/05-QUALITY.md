# 05 — 품질공학

← [04-DOE](04-DOE.md) · [인덱스](../DOOM_ARENA_CLAUDE.md) · 다음 → [06-ANALYTICS](06-ANALYTICS.md)

---

## SPC (통계적 공정 관리)

에이전트의 세대별 성과를 관리도로 모니터링한다.

```
X-bar/R 관리도:
  - X-bar: 세대별 평균 kill rate
  - R: 세대 내 에이전트 간 성과 범위(range)
  - 관리한계: UCL/LCL = X̄ ± A₂·R̄

이상 신호 감지 규칙 (Western Electric Rules):
  1. 1점이 3σ 밖 → 즉시 원인 조사
  2. 연속 7점이 중심선 한쪽 → 추세 변화 감지
  3. 연속 7점 증가/감소 → 드리프트 감지
  
적용:
  - 세대 진화 후 성과 하락 시 어떤 변이가 문제인지 추적
  - 대시보드 Evolution 탭에 관리도 실시간 표시
  - PI가 관리한계 이탈 시 자동으로 원인 분석 실험 설계
```

## 공정 능력 분석 (Process Capability)

```
Cp  = (USL - LSL) / 6σ    — 잠재 능력
Cpk = min((USL - μ) / 3σ, (μ - LSL) / 3σ)  — 실제 능력

적용:
  - USL/LSL: PI가 설정한 성과 목표 범위 (예: kill rate 5~15)
  - σ: 에이전트의 에피소드 간 성과 표준편차
  - Cpk > 1.33: "안정적 전략" → 엘리트로 보존
  - Cpk < 1.00: "불안정" → 변이 후보 또는 퇴출

부모 선택 기준 확장:
  기존: 평균 kill rate 기반
  확장: 평균 × Cpk 가중 (안정성 반영)
  또는: 타구치 SN비 기반 (강건성 반영)
```

## FMEA (Failure Mode and Effects Analysis)

에이전트 실패 모드를 체계적으로 분류하고 우선순위화한다.

```
encounters 테이블에서 outcome = 'death'인 레코드를 분석:

| 실패 모드             | 빈도(O) | 심각도(S) | 검출난이도(D) | RPN    |
|----------------------|---------|-----------|-------------|--------|
| 좁은 복도 다수적 조우   | 8       | 9         | 3           | 216    |
| 아이템 탐색 중 기습     | 6       | 7         | 6           | 252 ★  |
| 탄약 고갈 상태 교전     | 4       | 8         | 4           | 128    |
| 개활지 원거리 피격      | 7       | 5         | 2           | 70     |

빈도(O): 1~10, encounters 대비 발생 비율
심각도(S): 1~10, 사망 시 잔여 체력/진행도 손실
검출난이도(D): 1~10, 현재 RAG가 해당 상황을 얼마나 잘 매칭하는지의 역수

→ RPN 높은 순서로 다음 세대 실험 우선순위 배정
→ PI가 FMEA 테이블을 세대마다 갱신, 개선 추이 추적
→ 논문에서: RPN 감소 추이 = 시스템의 체계적 학습 증거
```

## 다기준 의사결정: TOPSIS

여러 성과 지표를 종합하여 에이전트를 순위화한다.

```
평가 기준 및 가중치 (PI가 세대별로 조정):
  w1: kill_rate        (0.30)  — 공격력
  w2: survival_time    (0.25)  — 생존력
  w3: Cpk              (0.20)  — 안정성
  w4: experiment_adopt  (0.15)  — 혁신 기여
  w5: ammo_efficiency  (0.10)  — 자원 효율

TOPSIS 절차:
  1. 정규화: r_ij = x_ij / √(Σ x_ij²)
  2. 가중 정규화: v_ij = w_j · r_ij
  3. 이상해(A+) 및 비이상해(A-) 결정
  4. 각 에이전트의 A+/A- 유클리드 거리 산출
  5. 상대적 근접도: C_i = d_i⁻ / (d_i⁺ + d_i⁻)
  6. C_i 내림차순 → 부모 선택 순위

대안: AHP(Analytic Hierarchy Process)
  - PI가 기준 간 쌍대비교 매트릭스 작성
  - 일관성 비율(CR < 0.10) 검증
  - 세대 전략 방향에 따라 가중치를 동적으로 변경
    (예: "이번 세대는 생존력 집중" → survival_time 가중치 상향)
```
